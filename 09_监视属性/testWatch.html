<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>testWatch</title></title>
    <script type="text/javascript" src="../js/vue.js"></script>
</head>

<body>
    <div id = "app">
        <h3>today's weather is: {{info}}</h3>
        <h3>today's tempreture is: {{weather.temperture}}</h3>
        <button @click= "addWeather">add temperture!</button><br/><br/>
        <button @click= "reduceWeather">reduce temperture!</button>
    </div>
    <script>
        Vue.config.productionTip = false //阻止 vue 在启动时生成生产提示。

        const vm = new Vue({
        
            el: '#app' ,
            data : {
                 weather:{
                    temperture : 8,
                    isHot : false
                 }
                
            },
            computed:{
                info(){
                    return this.weather.isHot? 'hot' : 'cold';
                },
                //通过计算属性computed做中间层访问weather对象中的temperture属性
                temperture(){
                    return this.weather.temperture;
                }
            },
            methods: {
                addWeather(){
                    this.weather.temperture += 5;
                    if(this.weather.temperture >= 25){
                        this.weather.isHot = true;
                    } 
                },
                reduceWeather(){
                    this.weather.temperture -= 5;
                    if(this.weather.temperture < 25){
                        this.weather.isHot = false;
                    } 
                }
            },
            watch:{
                //对computed属性中的tempreture进行监视
                temperture:{
                    handler(newValue , oldValue){
                        //console.log(newValue,oldValue,newValue-oldValue);
                        console.log("old tempretrue: " , oldValue);
                        console.log("new tempretrue: " ,newValue);
                        console.log("tempreture change: " , newValue-oldValue);
                    }
                },
                //对温度变化进行监听
                info:{
                    handler(nVal , oVal){
                        //console.log(nVal , oVal);
                        console.log(nVal , "->" , oVal , "weather changed! Pay attention to clothing!")
                    }
                }

            }
        })

    </script>
</body>

</html>